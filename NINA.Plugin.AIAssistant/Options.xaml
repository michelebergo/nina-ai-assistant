<ResourceDictionary
    x:Class="NINA.Plugin.AIAssistant.Options"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:NINA.Plugin.AIAssistant">

    <DataTemplate x:Key="NINA AI Assistant_Options">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical" Margin="10">
                
                <TextBlock Text="AI Assistant Configuration" FontSize="18" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" FontSize="12" Opacity="0.7">Configure your AI provider. Choose from free options (GitHub Models, Google Gemini, Ollama) or paid services (OpenAI, Anthropic, OpenRouter).</TextBlock>

                <GroupBox Header="Active Provider" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <ComboBox x:Name="ProviderSelector" 
                                  Loaded="ProviderSelector_Loaded"
                                  SelectionChanged="ProviderSelector_Changed" 
                                  HorizontalAlignment="Left" MinWidth="250">
                            <ComboBoxItem Content="GitHub Models (FREE)" Tag="GitHub"/>
                            <ComboBoxItem Content="OpenAI (PAID)" Tag="OpenAI"/>
                            <ComboBoxItem Content="Anthropic Claude (MCP)" Tag="Anthropic"/>
                            <ComboBoxItem Content="Google Gemini (FREE)" Tag="Google"/>
                            <ComboBoxItem Content="Ollama (LOCAL)" Tag="Ollama"/>
                            <ComboBoxItem Content="OpenRouter" Tag="OpenRouter"/>
                        </ComboBox>
                        <TextBlock x:Name="ProviderStatusText" Margin="0,5,0,0" FontSize="11" Opacity="0.7"/>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="GitHub Models (FREE)" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Free tier via GitHub token - No credit card required" FontSize="11" Opacity="0.6" Margin="0,0,0,8"/>
                        <TextBlock Text="GitHub Personal Access Token:" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <PasswordBox x:Name="GitHubTokenBox" Margin="0,0,5,0" Loaded="GitHubToken_Loaded" PasswordChanged="GitHubToken_Changed"/>
                            <Button Grid.Column="1" Content="Test" Click="TestGitHubKey_Click" Margin="0,0,5,0" MinWidth="50"/>
                            <Button Grid.Column="2" Content="Get Token" Click="GetGitHubToken_Click" MinWidth="70"/>
                        </Grid>
                        <TextBlock x:Name="GitHubTestResult" Margin="0,5,0,0" FontSize="11" TextWrapping="Wrap"/>
                        <TextBlock Text="Model:" Margin="0,10,0,5"/>
                        <ComboBox SelectedValue="{Binding GitHubModelId, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" HorizontalAlignment="Left" MinWidth="200">
                            <ComboBoxItem Content="gpt-4o-mini" IsSelected="True"/>
                            <ComboBoxItem Content="gpt-4o"/>
                            <ComboBoxItem Content="o1-mini"/>
                            <ComboBoxItem Content="o1"/>
                            <ComboBoxItem Content="Llama-3.3-70B-Instruct"/>
                            <ComboBoxItem Content="Mistral-Large-2411"/>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="OpenAI (PAID)" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="GPT-4, GPT-4o, o1 models - Requires OpenAI account with credits" FontSize="11" Opacity="0.6" Margin="0,0,0,8"/>
                        <TextBlock Text="OpenAI API Key:" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <PasswordBox x:Name="OpenAITokenBox" Margin="0,0,5,0" Loaded="OpenAIToken_Loaded" PasswordChanged="OpenAIToken_Changed"/>
                            <Button Grid.Column="1" Content="Test" Click="TestOpenAIKey_Click" Margin="0,0,5,0" MinWidth="50"/>
                            <Button Grid.Column="2" Content="Get Key" Click="GetOpenAIKey_Click" MinWidth="70"/>
                        </Grid>
                        <TextBlock x:Name="OpenAITestResult" Margin="0,5,0,0" FontSize="11" TextWrapping="Wrap"/>
                        <TextBlock Text="Model:" Margin="0,10,0,5"/>
                        <ComboBox SelectedValue="{Binding OpenAIModelId, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" HorizontalAlignment="Left" MinWidth="200">
                            <ComboBoxItem Content="gpt-4o-mini" IsSelected="True"/>
                            <ComboBoxItem Content="gpt-4o"/>
                            <ComboBoxItem Content="gpt-4-turbo"/>
                            <ComboBoxItem Content="gpt-3.5-turbo"/>
                            <ComboBoxItem Content="o1-mini"/>
                            <ComboBoxItem Content="o1-preview"/>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="Anthropic Claude (PAID)" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Claude 3.5 Sonnet, Opus, Haiku - Requires Anthropic account" FontSize="11" Opacity="0.6" Margin="0,0,0,8"/>
                        <TextBlock Text="Anthropic API Key:" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <PasswordBox x:Name="AnthropicTokenBox" Margin="0,0,5,0" Loaded="AnthropicToken_Loaded" PasswordChanged="AnthropicToken_Changed"/>
                            <Button Grid.Column="1" Content="Test" Click="TestAnthropicKey_Click" Margin="0,0,5,0" MinWidth="50"/>
                            <Button Grid.Column="2" Content="Get Key" Click="GetAnthropicKey_Click" MinWidth="70"/>
                        </Grid>
                        <TextBlock x:Name="AnthropicTestResult" Margin="0,5,0,0" FontSize="11" TextWrapping="Wrap"/>
                        <TextBlock Text="Model:" Margin="0,10,0,5"/>
                        <ComboBox SelectedValue="{Binding AnthropicModelId, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" HorizontalAlignment="Left" MinWidth="250">
                            <ComboBoxItem Content="claude-sonnet-4-20250514" IsSelected="True"/>
                            <ComboBoxItem Content="claude-3-7-sonnet-20250219"/>
                            <ComboBoxItem Content="claude-3-5-sonnet-latest"/>
                            <ComboBoxItem Content="claude-3-5-haiku-latest"/>
                            <ComboBoxItem Content="claude-3-opus-latest"/>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="Google Gemini (FREE TIER)" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Gemini 1.5 Flash/Pro - Free tier available with Google AI Studio" FontSize="11" Opacity="0.6" Margin="0,0,0,8"/>
                        <TextBlock Text="Google API Key:" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <PasswordBox x:Name="GoogleTokenBox" Margin="0,0,5,0" Loaded="GoogleToken_Loaded" PasswordChanged="GoogleToken_Changed"/>
                            <Button Grid.Column="1" Content="Test" Click="TestGoogleKey_Click" Margin="0,0,5,0" MinWidth="50"/>
                            <Button Grid.Column="2" Content="Get Key" Click="GetGoogleKey_Click" MinWidth="70"/>
                        </Grid>
                        <TextBlock x:Name="GoogleTestResult" Margin="0,5,0,0" FontSize="11" TextWrapping="Wrap"/>
                        <TextBlock Text="Model:" Margin="0,10,0,5"/>
                        <ComboBox SelectedValue="{Binding GoogleModelId, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" HorizontalAlignment="Left" MinWidth="200">
                            <ComboBoxItem Content="gemini-1.5-flash" IsSelected="True"/>
                            <ComboBoxItem Content="gemini-1.5-pro"/>
                            <ComboBoxItem Content="gemini-2.0-flash-exp"/>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="Ollama (LOCAL/FREE)" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Run AI models locally - Completely free, no API key needed" FontSize="11" Opacity="0.6" Margin="0,0,0,8"/>
                        <TextBlock Text="Ollama Server URL:" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox Text="{Binding OllamaEndpoint, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,5,0"/>
                            <Button Grid.Column="1" Content="Test" Click="TestOllama_Click" Margin="0,0,5,0" MinWidth="50"/>
                            <Button Grid.Column="2" Content="Get Ollama" Click="GetOllama_Click" MinWidth="70"/>
                        </Grid>
                        <TextBlock x:Name="OllamaTestResult" Margin="0,5,0,0" FontSize="11" TextWrapping="Wrap"/>
                        <TextBlock Text="Model:" Margin="0,10,0,5"/>
                        <ComboBox SelectedValue="{Binding OllamaModelId, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" IsEditable="True" HorizontalAlignment="Left" MinWidth="200">
                            <ComboBoxItem Content="llama3.2" IsSelected="True"/>
                            <ComboBoxItem Content="mistral"/>
                            <ComboBoxItem Content="qwen2.5"/>
                            <ComboBoxItem Content="phi3"/>
                            <ComboBoxItem Content="gemma2"/>
                        </ComboBox>
                        <TextBlock Text="Tip: Run 'ollama pull modelname' to download models" FontSize="10" Opacity="0.5" Margin="0,5,0,0"/>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="OpenRouter (FREE + PAID)" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock Text="Access multiple AI providers through one API - Has free models" FontSize="11" Opacity="0.6" Margin="0,0,0,8"/>
                        <TextBlock Text="OpenRouter API Key:" Margin="0,0,0,5"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <PasswordBox x:Name="OpenRouterTokenBox" Margin="0,0,5,0" Loaded="OpenRouterToken_Loaded" PasswordChanged="OpenRouterToken_Changed"/>
                            <Button Grid.Column="1" Content="Test" Click="TestOpenRouterKey_Click" Margin="0,0,5,0" MinWidth="50"/>
                            <Button Grid.Column="2" Content="Get Key" Click="GetOpenRouterKey_Click" MinWidth="70"/>
                        </Grid>
                        <TextBlock x:Name="OpenRouterTestResult" Margin="0,5,0,0" FontSize="11" TextWrapping="Wrap"/>
                        <TextBlock Text="Model:" Margin="0,10,0,5"/>
                        <ComboBox SelectedValue="{Binding OpenRouterModelId, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" IsEditable="True" HorizontalAlignment="Left" MinWidth="300">
                            <ComboBoxItem Content="meta-llama/llama-3.2-3b-instruct:free" IsSelected="True"/>
                            <ComboBoxItem Content="google/gemma-2-9b-it:free"/>
                            <ComboBoxItem Content="mistralai/mistral-7b-instruct:free"/>
                            <ComboBoxItem Content="openai/gpt-4o-mini"/>
                            <ComboBoxItem Content="anthropic/claude-3.5-sonnet"/>
                        </ComboBox>
                        <TextBlock Text="Models ending in ':free' are completely free to use" FontSize="10" Opacity="0.5" Margin="0,5,0,0"/>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="🤖 MCP - NINA Equipment Control (Anthropic Claude)" Margin="0,0,0,10">
                    <StackPanel Margin="5">
                        <TextBlock TextWrapping="Wrap" FontSize="11" Opacity="0.6" Margin="0,0,0,8">When using Anthropic Claude, enable MCP (Model Context Protocol) to give AI direct control over your NINA equipment via the Advanced API plugin.</TextBlock>
                        
                        <CheckBox Content="Enable MCP for Equipment Control" IsChecked="{Binding MCPEnabled, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>
                        
                        <TextBlock Text="NINA Advanced API Settings:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBlock Text="Requires: NINA Advanced API plugin installed and enabled" FontSize="10" Opacity="0.5" Margin="0,0,0,8"/>
                        
                        <Grid Margin="0,0,0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Host:" VerticalAlignment="Center"/>
                            <TextBox Grid.Column="1" Text="{Binding MCPNinaHost, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" MinWidth="150"/>
                        </Grid>
                        
                        <Grid Margin="0,0,0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Port:" VerticalAlignment="Center"/>
                            <TextBox Grid.Column="1" Text="{Binding MCPNinaPort, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" MinWidth="80"/>
                            <Button Grid.Column="2" Content="Test Connection" Click="TestMCPConnection_Click" Margin="10,0,0,0" MinWidth="100"/>
                        </Grid>
                        
                        <TextBlock x:Name="MCPTestResult" Margin="0,5,0,0" FontSize="11" TextWrapping="Wrap"/>
                        
                        <TextBlock TextWrapping="Wrap" FontSize="10" Opacity="0.5" Margin="0,10,0,0">With MCP enabled, you can ask Claude to: "Connect all equipment", "Take a 30s exposure of M31", "Cool camera to -10°C", "Start guiding", and more!</TextBlock>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                            <Button Content="Get Advanced API Plugin" Click="GetAdvancedAPIPlugin_Click" MinWidth="140"/>
                            <Button Content="MCP GitHub Repo" Click="GetMCPRepo_Click" Margin="10,0,0,0" MinWidth="120"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

                <TextBlock TextWrapping="Wrap" Margin="0,5,0,0" FontSize="11" Opacity="0.6">Tip: For beginners, start with GitHub Models (free) or Ollama (local). For best quality with equipment control, use Anthropic Claude with MCP enabled.</TextBlock>

            </StackPanel>
        </ScrollViewer>
    </DataTemplate>

</ResourceDictionary>
